{% extends 'account/account_base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Sign Up{% endblock title %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-5">
            <div class="card">
                <!-- Logo-->
                <div class="card-header pt-4 pb-4 text-center bg-primary">
                    <a href="{% url 'pages:home' %}">
                        <span><img src="{% static 'images/sullivan-logo.png' %}" alt="" height="65"></span>
                    </a>
                </div>

                <div class="card-body p-4">

                    <div class="text-center w-75 m-auto">
                        <h4 class="text-dark-50 text-center mt-0 font-weight-bold">Sign Up</h4>
                        <p class="text-muted mb-4">Don't have an account? Create one!</p>
                    </div>

                    <form method="post">
                        {% csrf_token %}
                        {{ form|crispy }}
                        <div class="form-check my-2">
                            <input type="checkbox" id="agree-to-terms" class="form-check-input mr-1">
                            <label for="agree-to-terms" class="form-check-label">
                                I have read and agree to the <a href="{% url 'pages:terms' %}" target="_blank">terms of service.</a>
                            </label>
                        </div>
                        <div class="form-group mb-0 text-center">
                            <button id="signup-submit" class="btn btn-secondary text-white shadow-none" type="submit">
                                Sign Up
                            </button>
                        </div>
                    </form>
                </div> <!-- end card-body -->
            </div>
            <!-- end card -->

            <div class="row mt-3">
                <div class="col-12 text-center">
                    <p class="text-muted">Already have account? <a href="{% url 'account_login' %}" class="text-muted ml-1"><b>Log In</b></a></p>
                    <a href="{% url 'pages:home' %}" class="text-muted">Return to Home Page</a>
                </div> <!-- end col-->
            </div>
            <!-- end row -->

        </div> <!-- end col -->
    </div>
    <!-- end row -->
</div>
<!-- end container -->
{% endblock content %}

{% block extrajs %}
    <script>
        const submitButton = document.getElementById("signup-submit");
        const agreeToTermsCheckbox = document.getElementById("agree-to-terms");

        const disableSubmit = () => {
            submitButton.disabled = true;
            submitButton.style.cursor = "default";
        };

        const enableSubmit = () => {
            submitButton.disabled = false;
            submitButton.style.cursor = "pointer";
        };

        disableSubmit();

        agreeToTermsCheckbox.addEventListener("change", e => {
            if (e.currentTarget.checked) {
                enableSubmit();
            } else {
                disableSubmit();
            }
        });
    </script>
{% endblock extrajs %}